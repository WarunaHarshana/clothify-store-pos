<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.ScrollPane?>
<?import javafx.scene.control.Separator?>
<?import javafx.scene.control.TableColumn?>
<?import javafx.scene.control.TableView?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.layout.AnchorPane?>
<?import javafx.scene.layout.FlowPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.Region?>
<?import javafx.scene.layout.VBox?>

<AnchorPane xmlns="http://javafx.com/javafx/21" xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="com.clothify.controller.PosFormController"
            styleClass="page-container" stylesheets="@../css/main.css">
    <HBox spacing="14" AnchorPane.leftAnchor="16" AnchorPane.rightAnchor="16"
          AnchorPane.topAnchor="16" AnchorPane.bottomAnchor="16">

        <!-- Left: Product Selection -->
        <VBox spacing="12" HBox.hgrow="ALWAYS">
            <Label text="Point of Sale" styleClass="page-title"/>
            <HBox spacing="8">
                <TextField fx:id="txtSearch" promptText="Search product by name or code..."
                           styleClass="search-field" HBox.hgrow="ALWAYS"/>
                <Button text="Search" onAction="#btnSearchProducts" styleClass="btn-secondary"/>
                <Button text="Clear" onAction="#btnClearSearch" styleClass="btn-secondary"/>
            </HBox>

            <ScrollPane fitToWidth="true" fitToHeight="true" VBox.vgrow="ALWAYS"
                        style="-fx-background-color:transparent;">
                <FlowPane fx:id="productFlow" hgap="10" vgap="10" prefWrapLength="700">
                    <padding><Insets top="8" right="8" bottom="8" left="8"/></padding>
                </FlowPane>
            </ScrollPane>
        </VBox>

        <!-- Right: Cart -->
        <VBox prefWidth="380" styleClass="card" spacing="10">
            <HBox alignment="CENTER_LEFT" spacing="10">
                <Label text="Shopping Cart" styleClass="panel-title"/>
                <Region HBox.hgrow="ALWAYS"/>
                <Label fx:id="lblItemCount" text="0" styleClass="status-badge status-pending"/>
            </HBox>

            <TableView fx:id="tblCart" VBox.vgrow="ALWAYS" styleClass="products-table">
                <columns>
                    <TableColumn fx:id="colCartName" prefWidth="140" text="Product"/>
                    <TableColumn fx:id="colCartQty" prefWidth="50" text="Qty"/>
                    <TableColumn fx:id="colCartPrice" prefWidth="80" text="Price"/>
                    <TableColumn fx:id="colCartTotal" prefWidth="80" text="Total"/>
                </columns>
                <placeholder>
                    <Label text="Cart is empty" style="-fx-text-fill: #9ca3af;"/>
                </placeholder>
            </TableView>

            <HBox spacing="8">
                <Button text="Remove" onAction="#btnRemoveItem" styleClass="btn-danger"/>
                <Button text="Clear All" onAction="#btnClearCart" styleClass="btn-secondary"/>
            </HBox>

            <Separator/>

            <HBox>
                <Label text="Total" styleClass="panel-title"/>
                <Region HBox.hgrow="ALWAYS"/>
                <Label fx:id="lblTotal" text="Rs. 0.00" styleClass="panel-title"/>
            </HBox>

            <Button text="Place Order" onAction="#btnPlaceOrder" styleClass="pos-place-order-btn"
                    prefHeight="44" maxWidth="1.7976931348623157E308"/>
        </VBox>
    </HBox>
</AnchorPane>
